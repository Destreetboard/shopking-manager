(this["webpackJsonpshopking-manager"]=this["webpackJsonpshopking-manager"]||[]).push([[23],{487:function(e,a,t){},495:function(e,a,t){"use strict";var s=t(13),c=t(61),n=t(30),r=t(126),l=t(1),i=t(2),o=t.n(i),j=t(581),b=t(580),u=t(87),d=t(9),m=["label","hideIcon","showIcon","visible","className","htmlFor","placeholder","iconSize","inputClassName","invalid"],h=Object(l.forwardRef)((function(e,a){var t,i=e.label,h=e.hideIcon,p=e.showIcon,O=e.visible,x=e.className,f=e.htmlFor,g=e.placeholder,v=e.iconSize,N=e.inputClassName,w=e.invalid,k=Object(r.a)(e,m),y=Object(l.useState)(O),S=Object(n.a)(y,2),C=S[0],z=S[1];return Object(d.jsxs)(l.Fragment,{children:[i?Object(d.jsx)(u.w,{className:"form-label",for:f,children:i}):null,Object(d.jsxs)(u.u,{className:o()((t={},Object(c.a)(t,x,x),Object(c.a)(t,"is-invalid",w),t)),children:[Object(d.jsx)(u.t,Object(s.a)(Object(s.a)({ref:a,invalid:w,type:!1===C?"password":"text",placeholder:g||"\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7",className:o()(Object(c.a)({},N,N))},i&&f?{id:f}:{}),k)),Object(d.jsx)(u.v,{className:"cursor-pointer",onClick:function(){return z(!C)},children:function(){var e=v||14;return!1===C?h||Object(d.jsx)(j.a,{size:e}):p||Object(d.jsx)(b.a,{size:e})}()})]})]})}));a.a=h,h.defaultProps={visible:!1}},986:function(e,a,t){"use strict";t.r(a);var s=t(61),c=t(30),n=t(1),r=t.n(n),l=t(462),i=t(460),o=t(495),j=t(87),b=(t(487),t(23)),u=t(3),d=t.n(u),m=t(6),h=t(5),p=t.n(h).a.create({baseURL:"https://shopking-api.herokuapp.com/api/v1"});p.interceptors.request.use((function(e){var a=localStorage.getItem("auth");return a&&(e.headers.Authorization="Bearer ".concat(a)),e}),(function(e){return Promise.reject(e)}));var O=t(571),x=t(588),f=t(465),g=t(133),v=t(121),N=t(213),w=t(128),k=t(65),y=t(461),S=t(9),C=function(e){var a=e.name,t=e.role;return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("div",{className:"toastify-header",children:Object(S.jsxs)("div",{className:"title-wrapper",children:[Object(S.jsx)(y.a,{size:"sm",color:"success",icon:Object(S.jsx)(O.a,{size:12})}),Object(S.jsxs)("h6",{className:"toast-title fw-bold",children:["Welcome, ",a]})]})}),Object(S.jsx)("div",{className:"toastify-body",children:Object(S.jsxs)("span",{children:["You have successfully logged in as an ",t," user to"," ",b.a.app.appName,". Now you can start to explore. Enjoy!"]})})]})};a.default=function(){var e,a=Object(v.b)(),t=Object(l.g)(),u=r.a.useContext(w.a),h=r.a.useState(""),O=Object(c.a)(h,2),y=O[0],z=O[1],I=r.a.useState(""),L=Object(c.a)(I,2),P=L[0],F=L[1],q=r.a.useState(""),R=Object(c.a)(q,2),A=R[0],B=R[1],D=r.a.useState(!1),E=Object(c.a)(D,2),J=E[0],W=E[1],G=r.a.useState(!1),M=Object(c.a)(G,2),U=M[0],Y=M[1],H=function(e,a){var t=n.useState(!1),s=Object(c.a)(t,2),r=s[0],l=s[1],i=function(){var t=Object(m.a)(d.a.mark((function t(s){var c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l(!0),t.prev=1,t.next=4,p.post("/auth/login",s);case 4:return c=t.sent,l(!1),t.abrupt("return",e?e(c.data.data):null);case 9:return t.prev=9,t.t0=t.catch(1),console.log(t.t0),l(!1),t.abrupt("return",a?a(t.t0.response.data):null);case 14:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}();return{handleLogin:i,isLoading:r}}((function(e){a(Object(g.b)(e.token));var s=Object(k.a)(e.token);!function(e){var a=[];a="admin"===e||"staff"===e?[{action:"manage",subject:"all"}]:[{action:"read",subject:"all"},{action:"read",subject:"Auth"}],u.update(a)}(s.role),t.push(Object(f.a)(s.role)),N.c.success(Object(S.jsx)(C,{name:s.firstname,role:s.role||"admin"}),{icon:!1,transition:N.a,hideProgressBar:!0,autoClose:2e3})}),(function(e){B(e.message)})),K=H.isLoading,Q=H.handleLogin;return Object(S.jsx)("div",{className:"auth-wrapper auth-basic px-2",children:Object(S.jsx)("div",{className:"auth-inner my-2",children:Object(S.jsx)(j.f,{className:"mb-0",children:Object(S.jsxs)(j.g,{children:[Object(S.jsxs)(i.b,{className:"brand-logo",to:"/",onClick:function(e){return e.preventDefault()},style:{alignItems:"flex-start"},children:[Object(S.jsx)("img",{width:"30",src:b.a.app.appLogoImage,alt:"Logo"}),Object(S.jsx)("h2",{className:"brand-text text-primary ms-1",children:b.a.app.appName})]}),Object(S.jsxs)(j.j,{tag:"h4",className:"mb-1",children:["Welcome to ",b.a.app.appName,"! \ud83d\udc4b"]}),Object(S.jsx)(j.i,{className:"mb-2",children:"Please sign-in to your staff account."}),J||U||!A?null:Object(S.jsx)(j.a,{color:"danger",children:Object(S.jsxs)("p",{className:"text-center",children:[Object(S.jsx)(x.a,{size:14})," ",A]})}),Object(S.jsxs)(j.q,{className:"auth-login-form mt-2",onSubmit:function(e){return e.preventDefault()},children:[Object(S.jsxs)("div",{className:"mb-1",children:[Object(S.jsx)(j.w,{className:"form-label",for:"login-email",children:"Email"}),Object(S.jsx)(j.t,{onChange:function(e){z(e.target.value),Y(!1),B("")},value:y,className:U?"border-danger text-danger":"",type:"email",id:"login-email",placeholder:"john@example.com",autoFocus:!0}),A&&U?A:null]}),Object(S.jsxs)("div",{className:"mb-1",children:[Object(S.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(S.jsx)(j.w,{className:"form-label",for:"login-password",children:"Password"}),Object(S.jsx)(i.b,{to:"/forgot-password",children:Object(S.jsx)("small",{children:"Forgot Password?"})})]}),Object(S.jsx)(o.a,(e={value:P,className:J?"border-danger text-danger":"",onChange:function(e){F(e.target.value),B(""),W(!1)}},Object(s.a)(e,"className","input-group-merge"),Object(s.a)(e,"id","login-password"),e)),A&&J?A:null]}),Object(S.jsxs)("div",{className:"form-check mb-1",children:[Object(S.jsx)(j.t,{type:"checkbox",id:"remember-me"}),Object(S.jsx)(j.w,{className:"form-check-label",for:"remember-me",children:"Remember Me"})]}),Object(S.jsx)(j.e,{color:"primary",block:!0,onClick:function(){return Y(!1),W(!1),B(""),y&&Object(f.d)(y)?P?void Q({email:y,password:P}):(W(!0),B("Password is required.")):(Y(!0),B("Invalid email address"))},children:K?Object(S.jsx)(j.G,{}):"Sign in"})]})]})})})})}}}]);
//# sourceMappingURL=23.c950b01a.chunk.js.map